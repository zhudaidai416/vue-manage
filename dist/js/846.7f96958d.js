"use strict";(self["webpackChunkvue_manage"]=self["webpackChunkvue_manage"]||[]).push([[846],{5846:function(e,t,a){a.r(t),a.d(t,{default:function(){return d}});var l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"user"},[t("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogVisible,width:"50%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("el-form",{ref:"form",attrs:{model:e.form,inline:!0,"label-width":"80px",rules:e.rules}},[t("el-form-item",{attrs:{label:"姓名",prop:"name"}},[t("el-input",{attrs:{placeholder:"请输入姓名"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),t("el-form-item",{attrs:{label:"年龄",prop:"age"}},[t("el-input",{attrs:{placeholder:"请输入年龄"},model:{value:e.form.age,callback:function(t){e.$set(e.form,"age",t)},expression:"form.age"}})],1),t("el-form-item",{attrs:{label:"性别",prop:"sex"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},[t("el-option",{attrs:{label:"男",value:1}}),t("el-option",{attrs:{label:"女",value:0}})],1)],1),t("el-form-item",{attrs:{label:"出生日期",prop:"birth"}},[t("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:e.form.birth,callback:function(t){e.$set(e.form,"birth",t)},expression:"form.birth"}})],1),t("el-form-item",{attrs:{label:"地址",prop:"addr"}},[t("el-input",{attrs:{placeholder:"请输入地址"},model:{value:e.form.addr,callback:function(t){e.$set(e.form,"addr",t)},expression:"form.addr"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.cancel}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确 定")])],1)],1),t("div",{staticClass:"header"},[t("el-button",{attrs:{type:"primary"},on:{click:e.add}},[e._v("+ 新增")]),t("el-form",{attrs:{inline:!0,model:e.userForm}},[t("el-form-item",[t("el-input",{attrs:{placeholder:"请输入姓名"},model:{value:e.userForm.name,callback:function(t){e.$set(e.userForm,"name",t)},expression:"userForm.name"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")])],1)],1)],1),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,height:"90%",stripe:""}},[t("el-table-column",{attrs:{prop:"name",label:"姓名",width:"120"}}),t("el-table-column",{attrs:{prop:"sex",label:"性别",width:"120"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(1===a.row.sex?"男":"女"))])]}}])}),t("el-table-column",{attrs:{prop:"age",label:"年龄",width:"120"}}),t("el-table-column",{attrs:{prop:"birth",label:"出生日期",width:"150"}}),t("el-table-column",{attrs:{prop:"addr",label:"地址"}}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.edit(a.row)}}},[e._v("编辑")]),t("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.del(a.row)}}},[e._v("删除")])]}}])})],1),t("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-sizes":[5,10,20],"page-size":e.pageData.limit,total:e.total},on:{"size-change":e.sizeChange,"current-change":e.currentPage}})],1)},s=[],i=a(9935),r={name:"UserView",data(){return{dialogVisible:!1,form:{name:"",age:"",sex:"",birth:"",addr:""},rules:{name:[{required:!0,message:"请输入姓名"}],age:[{required:!0,message:"请输入年龄"}],sex:[{required:!0,message:"请选择性别"}],birth:[{required:!0,message:"请选择出生日期"}],addr:[{required:!0,message:"请输入地址"}]},tableData:[],dialogType:0,dialogTitle:"新增用户",total:0,pageData:{page:1,limit:5},userForm:{name:""}}},mounted(){this.getList()},methods:{getList(){(0,i.PR)({...this.userForm,...this.pageData}).then((({data:e})=>{this.tableData=e.list,this.total=e.count||0}))},add(){this.dialogType=0,this.dialogTitle="新增用户",this.dialogVisible=!0},submit(){this.$refs.form.validate((e=>{console.log(e),e?(console.log("表单数据",this.form),0===this.dialogType?(0,i.cn)(this.form).then((()=>{this.$message.success("提交成功！"),this.getList()})):(0,i.uz)(this.form).then((()=>{this.getList()}))):this.$message.error("提交失败！")})),this.handleClose()},cancel(){this.handleClose()},handleClose(){this.dialogVisible=!1,this.$refs.form.resetFields()},edit(e){this.dialogType=1,this.dialogTitle="更新用户",this.dialogVisible=!0,this.form=JSON.parse(JSON.stringify(e))},del(e){this.$confirm("是否删除该用户","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{(0,i.ti)({id:e.id}).then((()=>{this.$message({type:"success",message:"删除成功!"}),this.getList()}))})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},currentPage(e){this.pageData.page=e,this.getList()},sizeChange(e){this.pageData.limit=e,this.getList()},search(){this.getList()}}},o=r,n=a(1001),m=(0,n.Z)(o,l,s,!1,null,"60a41b2c",null),d=m.exports}}]);
//# sourceMappingURL=846.7f96958d.js.map